<!DOCTYPE html>
<html>
  <head>
 
   <!-- Bootstrap Core CSS -->
   <link href="{{ relpath }}css/bootstrap.min.css" rel="stylesheet">
   <link href="{{ relpath }}css/font-awesome.min.css" rel="stylesheet">
   <link href="{{ relpath }}css/custom.css" rel="stylesheet">

   <!-- Bootstrap tooltips -->
   <script type="text/javascript" src="{{ relpath }}js/popper.js"></script>
   <!-- Bootstrap core JavaScript -->
   <script type="text/javascript" src="{{ relpath }}js/bootstrap.min.js"></script>

   <!-- Timeline chart -->
   <script type="text/javascript" src="{{ relpath }}js/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['timeline']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() {
        var container = document.getElementById('timeline');
        var chart = new google.visualization.Timeline(container);
        var dataTable = new google.visualization.DataTable();

        dataTable.addColumn({ type: 'string', id: 'section' });
        dataTable.addColumn({ type: 'string', id: 'task' });
	// Tooltip has to be the third column, otherwise it doesn't work.      
	dataTable.addColumn({ type: 'string', role: 'tooltip', 'p': {'html': true}});
        dataTable.addColumn({ type: 'date', id: 'start' });
        dataTable.addColumn({ type: 'date', id: 'end' });
        dataTable.addRows([
        {% for entry in data %}
		[ '{{ entry["section"] }}', '{{ entry["task"] }}', tooltipHTML('{{ entry["task"] }}', '{{ entry["year_start"] }}', '{{ entry["month_start"] }}', '{{ entry["day_start"] }}', '{{ entry["year_end"] }}', '{{ entry["month_end"] }}', '{{ entry["day_end"] }}', '{{ entry["duration_weeks"] }}', '{{ entry["description"] }}', '{{ entry["challenges_and_opportunities"] }}', '{{ entry["fte"] }}' ),
            new Date({{ entry['year_start']}}, {{ entry['month_start'] - 1 }}, {{ entry['day_start']}}), 
            new Date({{ entry['year_end']}}, {{ entry['month_end'] - 1 }}, {{ entry['day_end']}}) ],
	{% endfor %}
	]);

	var options = {
          // This line makes the entire category's tooltip active.
          focusTarget: 'category',
	  tooltip: {isHtml: true},
          timeline: { colorByRowLabel: true }
        };

        // chart.draw(dataTable, options);
	// Create and draw the visualization.
        new google.visualization.Timeline(document.getElementById('timeline')).draw(dataTable, options);
      }

      function tooltipHTML(task, yearStart, monthStart, dayStart, yearEnd, monthEnd, dayEnd, durationWeeks, description, chopp, fte) {
	      return '<h4>' + task + '</h4>' + '<br><p>' + yearStart + '-' + monthStart + '-' + dayStart + ' to ' + yearEnd + '-' + monthEnd + '-' + dayEnd + ' (' + durationWeeks + ' weeks)</p>' + '<br><b>Description: </b>' + description + '<br><b>Challenges & Opportunities: </b>' + chopp + '<br><b>FTE: </b>' + fte;
       
      }
    </script>

   
  </head>
  <body>
    <div class="container">
      <div class='row'>
        <div class="col-lg-12 col-sm-12 col-md-12">
          <h1>Roadmap</h1>
	  <br>
	  <a class="btn btn-warning" role="button" onClick="history.go(0)">Update</a>
	  <br>
	  <br>
          <div id="timeline" style="height: 1536px;"></div>
	</div>
      </div>
    </div>
  </body>
</html>


